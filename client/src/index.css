
@tailwind base;
@tailwind components;
@tailwind utilities;

/* html {
	overflow: hidden;
} */

html {
  scroll-behavior: smooth;
}

:root {
  /* line-height: 1.5;
	font-weight: 400; */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  /* Mantine Overrides */
  --mantine-color-body: light-dark(white, #09090b);

  /* Custom Colors */
  --shadcn-darkest: #09090b;
  --shadcn-dark: #18181b;
  --shadcn-light: #fafafa;
  --sidebar-bg: light-dark(#fbfbfb, #151518);
  --btn-default: light-dark(var(--shadcn-dark), var(--shadcn-light));
  --btn-reverse: light-dark(var(--shadcn-light), var(--shadcn-dark));
  --btn-secondary: light-dark(#f4f4f5, #27272a);
  --bd-light: light-dark(#e4e4e7, #27272a);
  --bd-strong: light-dark(#e4e4e7, #37373b);

  /* New colors */
  --color-light: rgb(31, 41, 55);
  /* stone-800 in RGB */
  --color-hover: #e5e5e5;

  /* Temp */
  /* --color-hover: light-dark(#eeeeef, #1e1e20); */
  /* --focus-ring-color: light-dark(#A1A1AA, #D4D4D8); */

  /* Layout */
  --list-margin: 1rem;

  color: #0a0a0a !important;
}

/* Add custom focus ring color for Mantine (used in theme object) */
.focus-auto {
  /* &:focus-visible {
		outline: 2px solid var(--focus-ring-color);
		outline-offset: 2px;
	} */
  /* &:focus-visible {
		border-color: blue;
	} */
}

/* Hide react query devtools */
div:has(> .tsqd-open-btn) {
  @apply hidden;
}

.card {
  @apply rounded-[12px] border border-bd-light shadow-sm;
}

.page {
  @apply size-full p-4 text-btn-default;
}

.new-page {
  @apply w-full grow text-btn-default overflow-y-hidden;
}

.middle-detail {}

.split-page {
  @apply flex size-full;

  .left-list {
    @apply flex flex-col border-r border-r-bd-light px-[var(--list-margin)] py-4;
  }

  .middle-detail {
    @apply flex flex-col h-full p-4 border-r border-r-bd-light;
  }

  .right-detail {
    @apply flex flex-col h-full grow p-4 size-full overflow-y-scroll;
  }
}

.mantine-Drawer-content {
  @apply bg-sidebar-bg;
}

/* Always visible thin scrollbars for relation drawer */
.relation-drawer-scroll {
  overflow-y: scroll !important;
  scrollbar-width: thin;
}

.relation-drawer-scroll::-webkit-scrollbar {
  width: 4px;
}

.relation-drawer-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.relation-drawer-scroll::-webkit-scrollbar-thumb {
  background-color: rgba(120, 113, 108, 0.4);
  border-radius: 2px;
}

.relation-drawer-scroll::-webkit-scrollbar-thumb:hover {
  background-color: rgba(120, 113, 108, 0.6);
}

/* Sidebar */
.sidebar-link {
  @apply flex h-[28px] w-full items-center gap-[10px] rounded-[9px] bg-transparent pl-3 pr-[18px] text-left font-medium capitalize text-[var(--color-light)] hover:bg-[var(--color-hover)] dark:text-shadcn-light [&.active]:bg-[var(--color-hover)] [&.active]:dark:bg-btn-secondary;
}

/* Desktop Styles */
@media (min-width: 48em) {
  .left-list {
    @apply w-[20%] min-w-[20%] max-w-[800px];
  }
}

/* Mobile Styles */
@media (max-width: 48em) {
  .left-list {
    @apply w-full max-w-full;
  }

  .sidebar-group-title {
    @apply text-base font-medium;
  }

  .sidebar-link {
    @apply h-10 text-base font-medium;
  }
}

/* List */

/* When a list gets a scroll area, the scrollbars show inside the list-margin */
/* To fix this, we offset the scroll area by the list-margin and increase the size to take up the full width */
.list-scrollarea {
  @apply h-full py-0 -ml-[var(--list-margin)] px-[var(--list-margin)];
  width: calc(100% + var(--list-margin) * 2);
}

.list-item {
  @apply mb-2 flex items-center justify-between rounded-lg border border-bd-light bg-sidebar-bg px-3 py-2.5 transition-colors duration-100 hover:cursor-pointer hover:bg-bd-light;

  &[data-selected="true"] {
    @apply bg-bd-light;
  }
}

/* Center mantine pagination controls */
.mantine-Pagination-root {
  .mantine-Group-root {
    @apply justify-center;
  }
}

.mantine-AppShell-navbar {
  transition: width 0.3s ease;
}

.ag-center-cols-viewport {
  min-height: unset !important;
}

:root {
  --ag-header-height: 36px;
}

.mantine-Menu-dropdown {
  .mantine-Menu-item {
    @apply text-[12px];
  }
}

/* Cell - row border */
.rgCell {
  box-shadow: none !important;

  @apply border-r border-b border-stone-200 text-left break-words text-[12px] font-[500];

  padding-top: 0px !important;
  padding-bottom: 0px !important;
  /* @apply overflow-hidden; */
}

/* Remove extra bottom spacing for long text cells */
.rgCell>div>div[class*="whitespace-pre-wrap"] {
  padding-bottom: 0 !important;
  margin-bottom: 0 !important;
  overflow: hidden !important;
}

.rgCell>div>div[class*="whitespace-pre-wrap"]>div {
  margin-bottom: -0.8em !important;
  padding-bottom: 0 !important;
  display: block !important;
  line-height: 1.8 !important;
}

.rgCell>.cell-flash,
.rgCell[data-column-type="number"] {
  /* @apply !px-3 !pb-2; */
}

.rgCell[data-column-type="number"] {
  @apply text-right;
}

/* Hide bottom border for auto-merge main cells */
.rgCell[auto-merge="main"] {
  border-bottom: none !important;
}

/* Ensure the cell's inner span takes full width */
.rgCell>span {
  @apply flex size-full;
}

.vertical-inner {
  border: none;
}

.colPinEnd {
  box-shadow: none !important;

  /* .vertical-inner,
	.vertical-inner * {
		background-color: red;
		display: none;
	} */
  .rgCell {
    border-bottom: none !important;
  }
}

/* Aggregate - bottom row, top border */
revogr-overlay-selection[type="rowPinEnd"] {
  .rgCell {
    @apply border-t border-t-bd-light;
  }

  .revo-draggable {
    @apply invisible;
  }

  /* Hide counter UI buttons in aggregation row, show only the number */
  .rgCell .revo-counter button,
  .rgCell [class*="counter"] button,
  .rgCell [class*="editor-counter"] button {
    display: none !important;
  }

  /* Show only the counter value as plain text in aggregation row */
  .rgCell .revo-counter,
  .rgCell [class*="counter"],
  .rgCell [class*="editor-counter"] {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-end !important;
    padding: 0 12px !important;
  }

  .rgCell .revo-counter .revo-counter-value,
  .rgCell [class*="counter"] .revo-counter-value {
    display: block !important;
  }
}

revo-grid {
  font-family: "Inter", sans-serif;
  border-color: #eeeff1 !important;
  border-left-width: 0px !important;
  border-right-width: 0px !important;
  border-width: 10px;
  border-style: solid;
  min-height: 100px;
  border-bottom: none !important;
  /* revogr-grid adds extra bottom border */

  revogr-attribution {
    display: none;
  }

  .colPinStart {
    /* Remove the default always-on shadow */
    @apply transition-shadow duration-200;
  }

  .revo-draggable {
    @apply h-[34px] text-lg text-stone-500 hover:text-stone-800;
  }
}

/* Lighten readonly tables */
.rgCell.disabled {
  background-color: #fafaf9 !important;
  filter: brightness(1.02) !important;
}

.header-rgRow {
  height: 36px !important;
  box-shadow: none !important;
  @apply border-b bg-white;
}

revogr-header {
  @apply bg-stone-100;

  /* background-color: transparent !important; */
  .rgHeaderCell {
    box-shadow: none !important;
    @apply border-r border-r-bd-light;
    text-transform: capitalize;
    font-size: 12px;
    color: #0a0a0a;
    border-color: #eeeff1 !important;
  }

  .resizable {
    display: none !important;
  }

  /* Hide revogrid filter button */
  .rv-filter,
  button.rv-filter,
  .filter-img {
    display: none !important;
  }
}

revogr-viewport-scroll {
  overscroll-behavior: none;
  /* Prevent elastic scrolling on macos */
  display: flex;
  flex-direction: column;
}

.inner-content-table {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.rgCell:has(> span > .add-column-cell) {
  /* Your styles here */
  background-color: red;
  pointer-events: none;
  display: none;
}

revogr-scroll-virtual {
  div {
    display: none;
  }

  /* Webkit browsers (Chrome, Safari, newer versions of Edge) */
  &::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: #d4d4d8;
    border-radius: 4px;
  }

  &::-webkit-scrollbar-button:start:decrement,
  &::-webkit-scrollbar-button:end:increment {
    display: none;
    /* Removes the top/bottom arrows */
    height: 0;
    width: 0;
  }

  /* Firefox */
  scrollbar-width: thin;
  scrollbar-color: #d4d4d8 transparent;
}

.uppy-Dashboard-AddFiles-title {
  font-size: 16px !important;
}

.panel-animation {
  transition: width 0.3s ease-out;
  overflow: hidden;
}

/* Smaller scrollbar for caption */
.caption-scrollbar {
  scrollbar-width: thin;
}

.caption-scrollbar::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

.caption-scrollbar::-webkit-scrollbar-track {
  background: transparent;
}

.caption-scrollbar::-webkit-scrollbar-thumb {
  background-color: rgba(120, 113, 108, 0.3);
  border-radius: 2px;
}

.caption-scrollbar::-webkit-scrollbar-thumb:hover {
  background-color: rgba(120, 113, 108, 0.5);
}

@layer base {
  :root {
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;
    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;
    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;
    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;
    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;
    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;
    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;
    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;
    --chart-1: 12 76% 61%;
    --chart-2: 173 58% 39%;
    --chart-3: 197 37% 24%;
    --chart-4: 43 74% 66%;
    --chart-5: 27 87% 67%;
    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;
    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;
    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;
    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
    --chart-1: 220 70% 50%;
    --chart-2: 160 60% 45%;
    --chart-3: 30 80% 55%;
    --chart-4: 280 65% 60%;
    --chart-5: 340 75% 55%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
  }
}

.groupingRow {
  @apply flex items-center justify-start pl-4 bg-stone-50;
  color: #2648f0;
  min-width: 0;
  max-width: 100%;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;

  .group-expand {
    color: #266df0;
    flex-shrink: 0;
  }
}

.colPinStart {
  position: relative !important;
  overflow: visible !important;

  .rgRow.groupingRow {
    @apply w-full absolute top-0 left-0 bg-stone-50;
    overflow: visible !important;
    pointer-events: auto !important;
    /* transform: translateZ(0) !important; */
  }
}

/* Query Builder */
.queryBuilder {
  background-color: transparent;

  .ruleGroup {
    @apply border-stone-200;
    background-color: transparent;
  }
}

/* Onboarding */
@keyframes slideIn {
  0% {
    opacity: 0;
    transform: translateY(-10px);
    max-height: 0;
    margin-bottom: 0;
  }

  100% {
    opacity: 1;
    transform: translateY(0);
    max-height: 80px;
  }
}

.animate-slideIn {
  animation: slideIn 0.3s ease-out forwards;
  overflow: hidden;
}

.searchable-select-wrapper {
  display: flex;
}

.searchable-select-wrapper>* {
  flex: 1;
}

.searchable-select-wrapper {
  position: relative;
}

.searchable-select-wrapper .mantine-InputBase-root,
.searchable-select-wrapper .mantine-InputBase-input {
  height: 28px !important;
  min-height: 28px !important;
}

.searchable-select-wrapper .mantine-InputBase-input {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
  display: flex;
  align-items: center;
}

/* Override revogrid counter styling to match your design */
.rgCell .revo-counter,
.rgCell [class*="counter"],
.rgCell [class*="editor-counter"] {
  font-size: 12px !important;
  font-weight: 400 !important;
  padding: 0 8px !important;
  height: 100% !important;
  max-height: 36px !important;
  /* Match row height */
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 4px !important;
}

/* Style the counter value (number) */
.rgCell .revo-counter .revo-counter-value,
.rgCell [class*="counter"] .revo-counter-value {
  font-size: 12px !important;
  font-weight: 400 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  min-width: 20px !important;
  text-align: center !important;
}

/* Style the counter input field */
.rgCell .revo-counter input,
.rgCell [class*="counter"] input {
  font-size: 12px !important;
  font-weight: 400 !important;
  text-align: center !important;
  /* Hide number input spinner buttons */
  -moz-appearance: textfield !important;
}

/* Hide spinner buttons in webkit browsers (Chrome, Safari, Edge) */
.rgCell .revo-counter input::-webkit-outer-spin-button,
.rgCell .revo-counter input::-webkit-inner-spin-button,
.rgCell [class*="counter"] input::-webkit-outer-spin-button,
.rgCell [class*="counter"] input::-webkit-inner-spin-button {
  -webkit-appearance: none !important;
  margin: 0 !important;
}

/* Ensure ActionIcon in counter doesn't add extra height */
.rgCell .revo-counter .mantine-ActionIcon-root {
  height: 20px !important;
  width: 20px !important;
  min-height: 20px !important;
  min-width: 20px !important;
  color: #292524 !important;
  /* stone-800 */
}

.rgCell .revo-counter .mantine-ActionIcon-root svg {
  color: #292524 !important;
  /* stone-800 */
}

/* Style the +/- buttons to match boolean size */
.rgCell .revo-counter button,
.rgCell [class*="counter"] button {
  height: 16px !important;
  width: 16px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  font-size: 10px !important;
  line-height: 1 !important;
  padding: 0 !important;
  border: none !important;
  background: #f9fafb !important;
  /* stone 50 */
  border-radius: 2px !important;
  cursor: pointer !important;
}

.rgCell .revo-counter button:hover,
.rgCell [class*="counter"] button:hover {
  background: #e5e7eb !important;
}

.rgCell .revo-counter button:disabled,
.rgCell [class*="counter"] button:disabled {
  opacity: 0.5 !important;
  cursor: not-allowed !important;
}

/* Added styling for the first column (index/checkbox) cells to REMIVE THE BORDER */
.colPinStart {
  box-shadow: none !important;
  border-right: none !important;
  /* Remove the default border */
}

/* This is used to add spacing between the raw data tables in the parser view */
.group.w-full.max-w-full {
  margin-bottom: 1.5rem;
  /* or use mb-8 if you prefer Tailwind */
}

/* Row Context Menu Styling */
revogr-overlay-context-menu,
.revo-context-menu {
  @apply bg-white border border-stone-200 shadow-lg min-w-[140px];
  font-family: "Inter", sans-serif;
  padding: 1px !important;
  border-radius: 0 !important;
}

/* Remove border radius from all elements */
revogr-overlay-context-menu *,
.revo-context-menu * {
  border-radius: 0 !important;
}

/* Sidesheet badge and boolean styling */
/* Target badge cell: wrapper > CellDisplay wrapper (group) > badge cell div */
.sidesheet-badge-wrapper .group>div:first-child {
  padding-left: 0rem !important;
  padding-right: 0.75rem !important;
  padding-top: 0rem !important;
  padding-bottom: 0.375rem !important;
}

/* Target boolean cell: wrapper > CellDisplay wrapper (group) > boolean cell div */
.sidesheet-boolean-wrapper .group>div:first-child {
  justify-content: flex-start !important;
  width: 100% !important;
  padding-left: 0.75rem !important;
  padding-right: 0.75rem !important;
}

/* Target number/float cell: wrapper > CellDisplay wrapper (group) > number cell container */
.sidesheet-number-wrapper .group>div:first-child {
  /* This is the outer container div in CellNumber; no direct alignment here */
}

/* Inner number content div: override right alignment for sidesheet */
.sidesheet-number-wrapper .group>div:first-child>div {
  justify-content: flex-start !important;
  /* override justify-end */
  text-align: left !important;
  /* override text-right */
}

/* Target date cell: wrapper > CellDisplay wrapper (group) > date cell div */
.sidesheet-date-wrapper .group>div:first-child {
  padding-left: 0rem !important;
  /* slightly less than table's px-3 (0.75rem) */
  padding-right: 0.75rem !important;
}

.email-placeholder input[type="text"]::placeholder,
.email-placeholder textarea::placeholder {
  color: #868e96;
  opacity: 1;
  font-size: 12px;
}

/* Make PillsInput field match other inputs */
.email-placeholder .m_45c4369d {
  font-size: 12px !important;
  height: auto !important;
  min-height: 25px !important;
  padding-top: 2px !important;
  padding-bottom: 2px !important;
}

/* Adjust PillsInput wrapper padding */
.email-placeholder .mantine-PillsInput-input.m_8fb7ebe7 {
  padding-top: 2px !important;
  padding-bottom: 2px !important;
  min-height: 25px !important;
}